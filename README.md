# Kafka Самостоятельная работа №1
---
### С помощью файла docker-compose создается кластер из 3 брокеров и интерфейса для взаимодействия с кафкой:
* В кластере используется 3 брокера, чтобы для каждой партиции топика мог быть назначен свой брокер, а так же чтобы можно было выполнить условие для репликации данных
---
### Создано 3 java проекта для тестирования работы кластера брокеров:
* **hw1-producer** - продюссер для кластера брокеров
* **hw1-consumer1** - консьюмер 1
* **hw1-consumer2** - консьюмер 2

### Описание консьюмеров:
#### Консьюмер 1 реализует:
* pull модель получения данных
* вручную управляемый коммит смещения
* группу консьюмеров: **group-1**

#### Консьюмер 2 реализует:
* push модель получения данных
* автоматический коммит смещения
* группу консьюмеров: **group-2**
---
## Запуск приложения и проверка его работы:
### Запуск кластера брокеров
* Через консоль необходимо перейти в папку с сохраненным файлом docker-compose.yml
* В консоли выполнить команду **"docker compose up -d"**
* В консоли выполнить команду **"docker ps"** должно быть видно 4 работающих контейнера
* В консоли выполнить команду **"docker exec -it <container_id_kafka> /bin/sh"**, где **<container_id_kafka>** id одного из брокеров кафка, эта команда позволяет взаимодействовать с контейнером кафка.
* В консоли взаимодествия с брокером кафка необходимо выполнить следующие команды:
  * Выполнить команду **"cd /opt/bitnami/kafka/bin"** для переходв в папку с файлом **kafka-topics.sh**
  * Выполнить команду создания топика **'topic-hw1'** с 3 партициями и 2 репликами **"kafka-topics.sh --create --topic topic-hw1 --bootstrap-server localhost:9092 --partitions 3 --replication-factor 2"**
  * Выполнить команду получения информации о топике **kafka-topics.sh --describe --bootstrap-server localhost:9092 --topic topic-hw1**
     *  Выведится сообщение следующего вида:
       
        *Topic: topic-hw1    TopicId: x87OsW58R7yYx9KUbVPZFw PartitionCount: 3       ReplicationFactor: 2    Configs:*
        
        *Topic: topic-hw1    Partition: 0    Leader: 1       Replicas: 1,2   Isr: 1,2*
        
        *Topic: topic-hw1    Partition: 1    Leader: 2       Replicas: 2,0   Isr: 2,0*
        
        *Topic: topic-hw1    Partition: 2    Leader: 0       Replicas: 0,1   Isr: 0,1*
        
* В браузере перейти по адресу http://localhost:8080 для доступа к интерфейсу управления Kafka
  
### Запуск консьюмеров
* В проекте **'hw-consumer1'** перейти в класс **'Consumer1'** и запустить выполнение метода **'main'**
* В проекте **'hw-consumer2'** перейти в класс **'Consumer2'** и запустить выполнение метода **'main'**

### Запуск продюсера
* В проекте **'hw1-producer'** перейти в класс **'CreateMessage'** и запусить выполнение метода **'main'**
* В процессе выполнения метода в кластер брокеров будет отправлено 2 сообщений
* Консьюмеры 1 и 2 получат данные сообщения
  

